<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tejas Vyasam — Data Analyst</title>
  <meta name="description" content="Tejas Vyasam — Data Analyst (PL-300). Power BI, automation, governance, applied ML." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-start:#eaf5ff; --bg-mid:#8BBEE6; --bg-end:#5B85AA;
      --card:#A1C8E8; --ink:#102035; --muted:#4e6079; --accent:#1f6fb2;
      --radius:28px; --shadow:0 28px 72px rgba(20,40,70,.24), 0 6px 18px rgba(20,40,70,.14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font:16px/1.6 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(180deg,var(--bg-start) 0%,var(--bg-mid) 38%,var(--bg-end) 100%);
    }
    .wrap{max-width:1024px; margin-inline:auto; padding:40px 20px}
    .hero{background:var(--card); border-radius:var(--radius); padding:40px 28px 32px; box-shadow:var(--shadow); position:relative}

    /* Header */
    .header{display:grid; grid-template-columns:auto 1fr; gap:18px; align-items:center}
    .badgewrap img{display:block; height:120px; filter:drop-shadow(0 12px 24px rgba(15,30,60,.28))}
    h1{margin:0; font-weight:800; font-size:clamp(30px,5.4vw,46px)}
    .role{margin:6px 0 0; color:#173252; font-style:italic; font-weight:700; font-size:clamp(17px,3vw,24px)}

    /* Actions */
    .actions{margin-top:14px; display:flex; gap:12px; flex-wrap:wrap; justify-content:space-between}
    .btn{padding:12px 16px; border-radius:14px; font-weight:600; text-decoration:none; display:flex;
      align-items:center; gap:8px; flex:1 1 200px; justify-content:center; color:#fff; background:var(--accent);
      box-shadow:0 4px 10px rgba(15,30,60,.15)}
    .btn.ghost{background:#fff; color:var(--ink); border:1px solid #e9f2ff}
    .btn svg{width:18px; height:18px}

    /* Stats */
    .stats{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:12px; margin-top:18px}
    .stat{background:#ffffffd9; border:1px solid #e7f1fb; border-radius:14px; padding:12px 14px}
    .stat .k{font-size:22px; font-weight:800}
    .stat .l{color:var(--muted); font-size:13px}

    /* About */
    .summary{margin-top:18px; background:#ffffffd9; border:1px solid #e7f1fb; border-radius:14px; padding:16px 18px}
    .summary h2{margin:0 0 8px; font-size:18px}
    .summary p{margin:0 0 10px}

    /* Designs (gallery) */
    .gallery{margin-top:22px; background:#ffffffd9; border:1px solid #e7f1fb; border-radius:14px; padding:16px 18px}
    .gallery h2{margin:0 0 12px}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:14px}
    .tile{border-radius:12px; overflow:hidden; border:1px solid #e7f1fb; background:#fff; box-shadow:0 4px 12px rgba(15,30,60,.1); cursor:pointer}
    .tile img{width:100%; height:180px; object-fit:cover}
    .meta{padding:8px 10px; font-size:12px; color:#5a6a80; border-top:1px solid #eef4fb}
    .modal{position:fixed; inset:0; background:rgba(10,20,40,.75); display:none; align-items:center; justify-content:center; z-index:100}
    .modal.open{display:flex}
    .modal img{max-width:92vw; max-height:86vh; border-radius:12px}
    .modal .close{position:absolute; top:18px; right:22px; background:#fff; border:0; padding:10px 12px; border-radius:10px; font-weight:700; cursor:pointer}

    footer{margin:26px 0 6px; color:#5e6f86; text-align:center}
    @media (max-width:700px){ .header{grid-template-columns:1fr; text-align:center} .badgewrap img{height:100px} }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="hero">
      <!-- Header -->
      <div class="header">
        <div class="badgewrap">
          <!-- PL-300 badge now links to your certificate -->
          <a
            href="https://learn.microsoft.com/api/credentials/share/en-us/TejasVyasam-8587/A22FE37A860DF2A3?sharingId=53BC4AA26E32FB17"
            target="_blank" rel="noopener"
            aria-label="View Microsoft PL-300 certificate">
            <img src="https://learn.microsoft.com/media/learn/certification/badges/microsoft-certified-associate-badge.svg?branch=main"
                 alt="Microsoft Certified: Power BI Data Analyst Associate — View certificate">
          </a>
        </div>
        <div>
          <h1>Tejas Vyasam</h1>
          <div class="role"><em>Data Analyst</em></div>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions">
        <a class="btn" href="https://github.com/tjas01" target="_blank" rel="noopener">Repository</a>
        <a class="btn ghost" href="https://docs.google.com/document/d/1yllgDKpD88WgszzXMBIyP7JBR5FXneLldbGwTmUzfyw/preview" target="_blank" rel="noopener">Résumé</a>
        <a class="btn ghost" href="https://www.linkedin.com/in/tejasvyasam/" target="_blank" rel="noopener">LinkedIn</a>
      </div>

      <!-- Stats -->
      <div class="stats" id="stats">
        <div class="stat"><div class="k" id="years">—</div><div class="l">Years in Data</div></div>
        <div class="stat"><div class="k" id="repos">—</div><div class="l">Repos</div></div>
        <div class="stat"><div class="k" id="commits">—</div><div class="l">Commits</div></div>
      </div>

      <!-- About Me -->
      <div class="summary">
        <h2>About Me</h2>
        <p>
          I partner with teams to turn raw information into reliable, decision-ready insights. My focus is executive-grade Power BI dashboards, practical automation, and the lightweight governance that keeps KPIs trustworthy. I am <strong>Microsoft PL-300 certified</strong> and comfortable translating analytics for senior audiences.
        </p>
        <p>
          I design clear stories from data, automate repeatable workflows with Python, n8n, Make, and Microsoft Fabric, and maintain accuracy through data dictionaries, ownership models, and refresh cadence. My toolkit spans SQL, Excel, and BigQuery, with applied machine learning across regression, clustering, recommender systems, gradient boosting, and neural networks.
        </p>
      </div>

      <!-- Designs -->
      <div id="designs" class="gallery">
        <h2>Designs</h2>
        <div class="grid" id="grid"></div>
      </div>
    </section>

    <footer><small>© <span id="y"></span> Tejas Vyasam • Built with GitHub Pages</small></footer>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Image viewer">
    <button class="close" id="closeBtn">Close</button>
    <img id="modalImg" alt="">
  </div>

  <script>
    const USER = "tjas01";
    const REPO = "tjas01.github.io";
    const BRANCH = "main";

    // Helper: image detection + raw url + date fmt
    function isImage(name){ return /\.(png|jpe?g|gif|webp|svg)$/i.test(name); }
    function rawUrl(path){ return `https://raw.githubusercontent.com/${USER}/${REPO}/${BRANCH}/${path}`; }
    function fmtDate(s){
      try{
        const d = new Date(s);
        return d.toLocaleDateString(undefined,{year:"numeric",month:"short",day:"2-digit"});
      }catch{ return ""; }
    }

    // Designs: list files, fetch last-commit date for each image, sort by date desc, render
    async function loadDesigns(){
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      try{
        const url = `https://api.github.com/repos/${USER}/${REPO}/contents?ref=${BRANCH}`;
        const r = await fetch(url, {headers:{"Accept":"application/vnd.github+json"}});
        if(!r.ok) throw new Error("Failed to load repo contents");
        const data = await r.json();

        // Keep only image files in root
        const images = data.filter(item => item.type==="file" && isImage(item.name));

        // For each image, look up its most recent commit date (date added/updated)
        const withDates = await Promise.allSettled(images.map(async (item) => {
          const commitsUrl = `https://api.github.com/repos/${USER}/${REPO}/commits?path=${encodeURIComponent(item.path)}&per_page=1&sha=${BRANCH}`;
          const cr = await fetch(commitsUrl, {headers:{"Accept":"application/vnd.github+json"}});
          let lastDate = null;
          if(cr.ok){
            const cj = await cr.json();
            if(Array.isArray(cj) && cj[0]?.commit?.author?.date){
              lastDate = cj[0].commit.author.date;
            }
          }
          return {
            name: item.name,
            path: item.path,
            src: rawUrl(item.path),
            date: lastDate ? new Date(lastDate) : new Date(0) // fallback to epoch if unknown
          };
        }));

        const entries = withDates
          .filter(x => x.status === "fulfilled")
          .map(x => x.value);

        // Sort newest first by commit date
        entries.sort((a,b) => b.date - a.date);

        // Render tiles
        for(const it of entries){
          const div = document.createElement("div");
          div.className = "tile";
          div.innerHTML = `
            <img src="${it.src}" alt="${it.name}">
            <div class="meta">Updated: ${fmtDate(it.date)}</div>
          `;
          div.onclick = ()=>openModal(it.src, it.name);
          grid.appendChild(div);
        }

      }catch(e){
        // graceful fallback: nothing breaks if API throttles
        grid.innerHTML = "<small style='color:#5a6a80'>Could not sort by date (API limit). Images will appear when available.</small>";
      }
    }

    // Modal viewer
    function openModal(src,alt){
      document.getElementById("modalImg").src=src;
      document.getElementById("modalImg").alt=alt;
      document.getElementById("modal").classList.add("open");
    }
    document.getElementById("closeBtn").onclick=()=>document.getElementById("modal").classList.remove("open");
    document.getElementById("modal").onclick=e=>{ if(e.target.id==="modal") document.getElementById("modal").classList.remove("open"); }

    // Years in Data (start: July 2016)
    function loadYears(){
      const start = new Date(Date.UTC(2016,6,1)); // 2016-07-01
      const now = new Date();
      let years = now.getUTCFullYear()-start.getUTCFullYear();
      const m = now.getUTCMonth()-start.getUTCMonth();
      const d = now.getUTCDate()-start.getUTCDate();
      if(m<0||(m===0&&d<0)) years-=1;
      document.getElementById("years").textContent = years;
    }

    // Repos (public only via public API; total including private is not exposed without auth)
    async function loadRepos(){
      try{
        const u = await fetch(`https://api.github.com/users/${USER}`, {headers:{"Accept":"application/vnd.github+json"}});
        const j = await u.json();
        document.getElementById("repos").textContent = j.public_repos ?? 0;
      }catch(e){}
    }

    // Commits from public activity
    async function loadCommits(){
      try{
        let page=1, commits=0;
        while(page<=10){ // up to 1000 recent events
          const r = await fetch(`https://api.github.com/users/${USER}/events/public?per_page=100&page=${page++}`, {headers:{"Accept":"application/vnd.github+json"}});
          const batch = await r.json();
          if(!Array.isArray(batch) || batch.length===0) break;
          for(const ev of batch){
            if(ev.type==="PushEvent"){
              commits += ev.payload?.size || 0;
            }
          }
          if(batch.length<100) break;
        }
        document.getElementById("commits").textContent = commits;
      }catch(e){}
    }

    // Run
    loadDesigns();
    loadYears();
    loadRepos();
    loadCommits();
    document.getElementById("y").textContent=new Date().getFullYear();
  </script>
</body>
</html>
