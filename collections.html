<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Collections — Tejas Vyasam</title>
  <meta name="description" content="Dashboard and analysis image collections by Tejas Vyasam." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-start:#eaf5ff; --bg-mid:#8BBEE6; --bg-end:#5B85AA;
      --card:#A1C8E8; --ink:#102035; --muted:#4e6079; --accent:#1f6fb2;
      --radius:28px; --shadow:0 28px 72px rgba(20,40,70,.24), 0 6px 18px rgba(20,40,70,.14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; color:var(--ink); font:16px/1.6 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(180deg,var(--bg-start) 0%,var(--bg-mid) 38%,var(--bg-end) 100%);}
    .wrap{max-width:1120px; margin-inline:auto; padding:40px 20px}
    .card{background:var(--card); border-radius:var(--radius); padding:28px; box-shadow:var(--shadow); position:relative}

    /* Floating nav (same look) */
    .sidenav{position:fixed; left:20px; top:120px; display:flex; flex-direction:column; gap:10px; z-index:10}
    .sidenav a{background:#ffffffee; color:var(--ink); border:1px solid #e1eefb; text-decoration:none; font-weight:700;
      padding:10px 12px; border-radius:14px; box-shadow:0 6px 14px rgba(15,30,60,.15); min-width:108px; text-align:center}
    .sidenav a.active{background:#1f6fb2; color:#fff; border-color:#1f6fb2}
    @media (max-width:900px){ .sidenav{position:static; flex-direction:row; justify-content:center; margin-bottom:12px} }

    h1{margin:0 0 12px; font-size:clamp(26px,5vw,40px)}
    .hint{color:#1d3557; margin:6px 0 18px}

    /* Gallery grid */
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:14px}
    .tile{position:relative; border-radius:16px; overflow:hidden; border:1px solid #e7f1fb; background:#fff;
      box-shadow:0 6px 18px rgba(15,30,60,.10); cursor:pointer}
    .tile img{display:block; width:100%; height:200px; object-fit:cover}
    .tile .cap{position:absolute; left:0; right:0; bottom:0; padding:8px 10px; font-size:13px;
      background:linear-gradient(180deg, transparent, rgba(0,0,0,.55)); color:#fff}

    /* Modal viewer */
    .modal{position:fixed; inset:0; background:rgba(10,20,40,.75); display:none; align-items:center; justify-content:center; z-index:100}
    .modal.open{display:flex}
    .modal img{max-width:92vw; max-height:86vh; border-radius:12px; box-shadow:0 18px 40px rgba(0,0,0,.45)}
    .modal .close{position:absolute; top:18px; right:22px; background:#fff; border:0; padding:10px 12px; border-radius:10px; font-weight:700; cursor:pointer}
    footer{margin:26px 0 6px; color:#5e6f86; text-align:center}
  </style>
</head>
<body>
  <nav class="sidenav" aria-label="Site">
    <a href="./">Overview</a>
    <a class="active" href="collections.html">Collections</a>
  </nav>

  <main class="wrap">
    <section class="card">
      <h1>Collections</h1>
      <p class="hint">Add PNG/JPG/SVG files to the <code>collections/</code> folder of this repo and push. This page will update automatically.</p>

      <div id="gallery" class="grid" aria-live="polite"></div>
    </section>

    <footer><small>© <span id="y"></span> Tejas Vyasam • Built with GitHub Pages</small></footer>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Image viewer">
    <button class="close" id="closeBtn">Close</button>
    <img id="modalImg" alt="">
  </div>

  <script>
    const USER = "tjas01";
    const REPO = "tjas01.github.io";
    const BRANCH = "main";
    const FOLDER = "collections"; // folder in your repo

    const $ = s => document.querySelector(s);

    async function listFolder(){
      const url = `https://api.github.com/repos/${USER}/${REPO}/contents/${FOLDER}?ref=${BRANCH}`;
      const r = await fetch(url, {headers: {"Accept":"application/vnd.github+json"}});
      if(!r.ok) return [];
      return r.json();
    }

    function isImage(name){
      return /\.(png|jpe?g|gif|webp|svg)$/i.test(name);
    }

    function rawUrl(path){
      return `https://raw.githubusercontent.com/${USER}/${REPO}/${BRANCH}/${path}`;
    }

    function render(items){
      const grid = $("#gallery");
      if(!Array.isArray(items) || items.length===0){
        grid.innerHTML = `<div class="tile" style="padding:18px; display:flex; align-items:center; justify-content:center;">
          <div>No images yet. Add files to <code>${FOLDER}/</code> and push.</div>
        </div>`;
        return;
      }
      grid.innerHTML = "";
      for(const it of items.filter(x=>x.type==="file" && isImage(x.name))){
        const src = rawUrl(it.path);
        const div = document.createElement("div");
        div.className = "tile";
        div.innerHTML = `<img src="${src}" alt="${it.name}"><div class="cap">${it.name}</div>`;
        div.addEventListener("click", ()=>openModal(src, it.name));
        grid.appendChild(div);
      }
    }

    function openModal(src, alt){
      $("#modalImg").src = src; $("#modalImg").alt = alt;
      $("#modal").classList.add("open");
    }
    $("#closeBtn").addEventListener("click", ()=>$("#modal").classList.remove("open"));
    $("#modal").addEventListener("click", e=>{ if(e.target.id==="modal") $("#modal").classList.remove("open") });

    (async function(){
      try{
        const items = await listFolder();
        render(items);
      }catch(e){ render([]); }
      $("#y").textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>
